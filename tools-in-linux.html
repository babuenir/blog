<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Tools in Linux</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Serif+Pro:400,700">
    <link rel="stylesheet" type="text/css" href="https://babuenir.github.io/blog/theme/css/main.css">
    <script src="https://use.fontawesome.com/76ac647053.js"></script>
</head>
<body itemscope itemtype="http://schema.org/Blog">
<header class="site-header">
    <a href="https://babuenir.github.io/blog">
        <img src="https://babuenir.github.io/blog/static/images/babuenir.png" alt="Babuenir" title="Babuenir">
    </a>
    <h1 itemprop="name"><a href="https://babuenir.github.io/blog">BABUENIR</a></h1>
<p class="subtitle">Random musings on the universe</p>    <br />
    <div>
      <a class="button" href="https://babuenir.github.io/blog/category/technology.html">Technology</a>&nbsp;
      <a class="button" href="https://babuenir.github.io/blog/category/art.html">Art</a>&nbsp;
      <a class="button" href="https://babuenir.github.io/blog/category/literature.html">Literature</a>
    </div>
</header>
    <main>
    <section class="main-content">
<article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
        <h1 itemprop="headline" id="tools-in-linux">Tools in Linux</h1>
        <p>
            <meta itemprop="datePublished" content="2016-09-28T00:00:00+05:30">
            <meta itemprop="dateModified" content="2016-09-28T00:00:00+05:30">
            <meta itemprop="image" content="https://secure.gravatar.com/avatar/aaf9dadf96ba3361de25e04a6c9fdfc3">
            Posted on 28 September 2016 in <a href="https://babuenir.github.io/blog/category/technology.html">Technology</a>
        </p>
        <p class="shareicons"><a href="http://www.addtoany.com/share_save?linkurl=https://babuenir.github.io/blog/tools-in-linux.html"><i class="fa fa-plus-square" style="padding-right:5px;"></i>Share: </a><a href="http://www.facebook.com/share.php?u=https://babuenir.github.io/blog/tools-in-linux.html"><i class="fa fa-facebook-square" style="padding-right:5px"></i></a><a href="http://twitter.com/share?url=https://babuenir.github.io/blog/tools-in-linux.html"><i class="fa fa-twitter-square" style="padding-right:5px"></i></a><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://babuenir.github.io/blog/tools-in-linux.html"><i class="fa fa-linkedin-square" style="padding-right:5px;"></i></a><a href="https://plus.google.com/share?url=https://babuenir.github.io/blog/tools-in-linux.html"><i class="fa fa-google-plus-square" style="padding-right:5px;"></i></a></p>
    </header>
    <section id="content" itemprop="mainEntityOfPage">
        <hr class="docutils" />
<div class="section" id="overview">
<h2>Overview</h2>
<p><img alt="Tux" src="static/images/linux-format.jpg" style="width: 500px;" /></p>
<p>Imagine a situation with no tools available to check a systemâ€™s
performance, when it comes to an Embedded system engineer. Especially,
with operating systems like Linux. There are hell lot of tools now at
our service. But during the ages of initial Linux Kernel developement,
think about how system analysis had been done. This post is to throw
some light over the tools that are available for us to poke the system
at right places and see how it behaves.</p>
<div class="section" id="tools-category">
<h3>Tools Category</h3>
<p>There are several categories and number of tools under each category.</p>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="45%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Categories</th>
<th class="head">Tools</th>
</tr>
</thead>
<tbody valign="top">
<tr><td rowspan="5"><strong>Debugging</strong></td>
<td>GDB</td>
</tr>
<tr><td>strace</td>
</tr>
<tr><td>pmap</td>
</tr>
<tr><td>pstack</td>
</tr>
<tr><td>mtrace</td>
</tr>
<tr><td rowspan="4"><strong>Profiling</strong></td>
<td>OProfile</td>
</tr>
<tr><td>Perf</td>
</tr>
<tr><td>gprof</td>
</tr>
<tr><td>memprof</td>
</tr>
<tr><td rowspan="4"><strong>Tracing</strong></td>
<td>ftrace</td>
</tr>
<tr><td>Lttng</td>
</tr>
<tr><td>System map</td>
</tr>
<tr><td>dtrace</td>
</tr>
<tr><td><strong>Analyzing</strong></td>
<td>&nbsp;</td>
</tr>
<tr><td><strong>(i) Resource Analyzing</strong></td>
<td>valgrind</td>
</tr>
<tr><td rowspan="3"><strong>(ii) Process Analyzing</strong></td>
<td>proc tools</td>
</tr>
<tr><td>vmstat</td>
</tr>
<tr><td>procstat</td>
</tr>
<tr><td><strong>Coverage</strong></td>
<td>gcov</td>
</tr>
<tr><td rowspan="5"><strong>Benchmarking</strong></td>
<td>LMbench</td>
</tr>
<tr><td>IOzone</td>
</tr>
<tr><td>memtester</td>
</tr>
<tr><td>flashbench</td>
</tr>
<tr><td>fio</td>
</tr>
<tr><td rowspan="4"><strong>Additional tools</strong></td>
<td>stress-app test</td>
</tr>
<tr><td>measuretime</td>
</tr>
<tr><td>grabserial</td>
</tr>
<tr><td>linux-serial-test</td>
</tr>
</tbody>
</table>
<div class="section" id="debugging">
<h4>Debugging</h4>
<p>The tools here are helpful when we are in need of understanding what is
going on while the executing a program that is holding the computer with
itself. The sequence of system calls, memory it consumes and so on can
be traced using the following tools.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tool</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>GDB</strong></td>
<td>the GNU Project debugger, allows you
to see what is going on inside an
other program while it executes-or
what another program was doing at
the moment it crashed.</td>
</tr>
<tr><td><strong>strace</strong></td>
<td>runs the specified command until it
exits. It intercepts and records the
system calls which are called by a
process and the signals which are
received by a process.</td>
</tr>
<tr><td><strong>pmap</strong></td>
<td>reports the memory map of the process</td>
</tr>
<tr><td><strong>pstack</strong></td>
<td>attaches to the active processes
named by the pids on the commandline,
and prints out an execution stack
trace, including a hint at what the
function arguments are.</td>
</tr>
<tr><td><strong>mtrace</strong></td>
<td>memory debugger included in GNU C
library. The handlers log all memory
allocations and frees to a file.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="profiling">
<h4>Profiling</h4>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tool</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>oprofile</strong></td>
<td>OProfile is a system-wide profiler
for Linux systems, capable of profiling
all running code at low overhead.
OProfile leverages the hardware
performance counters of the CPU to
enable profiling of a wide variety of
interesting statistics, which can also
be used for basic time-spent profiling.</td>
</tr>
<tr><td><strong>perf</strong></td>
<td>It is capable of statistical profiling
of entire system (both kernel and user
code), single CPU or several threads.</td>
</tr>
<tr><td><strong>gprof</strong></td>
<td>a performance analyzing tool in Unix.
It uses a hybrid variety of
instrumentaion and sampling. It is an
extension of the older prof Unix tool.
Unlike prof, gprof is capable of limited
call graph printing.</td>
</tr>
<tr><td><strong>memprof</strong></td>
<td>tool for profiling memory usage and
finding memory leaks.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tracing">
<h4>Tracing</h4>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tool</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>ftrace</strong></td>
<td>A Linux kernel internal tracer. It
includes function tracer. ftrace is
named after it.</td>
</tr>
<tr><td><strong>Lttng</strong></td>
<td>The LTTng project aims at providing
highly efficient tracing tools for
Linux. Its tracers help tracking down
performance issues and debugging
problems involving multiple concurrent
processes and threads. Tracing across
multiple systems is also possible.</td>
</tr>
<tr><td><strong>System tap</strong></td>
<td>Assists the diagnosis of a performance
or functional problem. Reduces
the developers process sequences to
collect performance data.</td>
</tr>
<tr><td><strong>dtrace</strong></td>
<td>A comprehensive dynamic tracing
framework for troubleshooting kernel
and application problems on production
systems in real time.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="analyzing">
<h4>Analyzing</h4>
<div class="section" id="resource-analyzing">
<h5>Resource Analyzing</h5>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tool</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>Valgrind</strong></td>
<td>Instrumentation framework for
building dynamic analysis tools.</td>
</tr>
<tr><td><strong>Helgrind</strong></td>
<td>A Valgrind tool for detecting
synchronisation errors in C, C++ and
Fortran programs that use the POSIX
pthreads threading primitives.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="process-analyzing">
<h5>Process Analyzing</h5>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tool</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>proc tools</strong></td>
<td>The proc tools are utilities that
exercise features of /proc</td>
</tr>
<tr><td><strong>vmstat</strong></td>
<td>Reports information about processes,
memory, paging, block IO, traps,
and cpu activity.</td>
</tr>
<tr><td><strong>procstat</strong></td>
<td>Displays detailed information about
the processes identified by the pid
arguments or all processes.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="coverage">
<h4>Coverage</h4>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tool</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>gcov</strong></td>
<td>A test coverage program. Use it in
concert with GCC to analyze programs
to help create more efficient, faster
running code and to discover untested
parts of the program.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="benchmarking">
<h4>Benchmarking</h4>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tool</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>LMbench</strong></td>
<td>A benchmarking tool for bandwidth,
latency and processor clock rate etc.</td>
</tr>
<tr><td><strong>IOzone</strong></td>
<td>A filesystem benchmark tool. The
benchmark generates and measures a
variety of file operations. Iozone
has been ported to many machines and
runs under many operating systems.</td>
</tr>
<tr><td><strong>memtester</strong></td>
<td>DDR testing benchmark.</td>
</tr>
<tr><td><strong>flashbench</strong></td>
<td>Flash benchmarking.</td>
</tr>
<tr><td><strong>fio</strong></td>
<td>Flash benchmarking.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="additional-tools">
<h4>Additional tools</h4>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Tool</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>stress-app test</strong></td>
<td>Stressful Application Test (or
stressapptest, its unix name) tries
to maximize randomized traffic to
memory from processor and I/O, with
the intent of creating a realistic
high load situation in order to test
the existing hardware devices in a
computer. It has been used at Google
for some time and now it is available
under the apache 2.0 license.</td>
</tr>
<tr><td><strong>measuretime</strong></td>
<td>Timing analysis.</td>
</tr>
<tr><td><strong>grabserial</strong></td>
<td>Boottime analysis, grabs the serial
console with respect to pattern and
time.</td>
</tr>
<tr><td><strong>linux-serial-test</strong></td>
<td>For serial bandwidth testing.</td>
</tr>
<tr><td><strong>smem</strong></td>
<td>Gives numerous reports on memory
usage in Linux system.</td>
</tr>
<tr><td><strong>SYSSTAT</strong></td>
<td>Contains utilities to monitor system
performance and usage activities.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="usage-and-risks">
<h3>Usage and Risks</h3>
<ul class="simple">
<li>These tools provide better grounds for delivering a quality software.</li>
<li>Tests the corner cases.</li>
<li>Traces the memory leaks, buffer overflow etc.,</li>
<li>Produces the performance data in both system level and application
level.</li>
<li>Using these tools need understanding of its benefits, Knowledge of
when, where and how to use them.</li>
<li>These tools require configurations and particular coding style, which
increases the size of the binary compiled. This means we need to have
a provision of debug and release flags in the code.</li>
<li>The best approach would be to use these tools from the development
phase itself.</li>
</ul>
</div>
<div class="section" id="proposed-methodologies">
<h3>Proposed methodologies</h3>
<ul class="simple">
<li>To use QEMU, and Eclipse based build and testing platform during
developement phase itself.</li>
</ul>
</div>
<div class="section" id="known-issues">
<h3>Known Issues</h3>
<ul class="simple">
<li>sftp-server is needed for transferring the information between target
and host for any profiling / debugging tool.</li>
<li>oprofile-server in target and oprofile-viewer(eclipse) in host are
needed for viewing the report in graphical format.</li>
</ul>
</div>
<div class="section" id="solution">
<h3>Solution</h3>
<ul class="simple">
<li>We should cross compile sftp-server from openssh source and placed it
in target (/usr/libexec/sftp-server). This location is mandatory
because eclipse searches for this path.</li>
<li>oprofile-server is cross-compiled for target and oprofile-viewer is
compiled and install in host.</li>
</ul>
</div>
<div class="section" id="references">
<h3>References</h3>
<ul class="simple">
<li><a class="reference external" href="https://perf.wiki.kernel.org/index.php/Tutorial">Perf Tutorial</a></li>
<li><a class="reference external" href="http://wiki.eclipse.org/Linux_Tools_Project/PERF/User_Guide">Perf Userguide - Eclipse Linux Tools
Project</a></li>
<li><a class="reference external" href="http://oprofile.sourceforge.net/examples">OProfile examples</a></li>
<li><a class="reference external" href="http://wiki.eclipse.org/Linux_Tools_Project/OProfile/User_Guide">OProfile Userguide - Eclipse Linux Tools
Project</a></li>
<li><a class="reference external" href="http://valgrind.org/docs/manual/index.html">Valgrind Documentation
Page</a></li>
<li><a class="reference external" href="http://wiki.eclipse.org/Linux_Tools_Project/Valgrind/User_Guide">Valgrind Userguide - Eclipse Linux Tools
Project</a></li>
<li><a class="reference external" href="http://elinux.org/Grabserial">Grabserial elinux page</a></li>
<li><a class="reference external" href="https://github.com/cbrake/linux-serial-test">Linux-serial-test</a></li>
<li><a class="reference external" href="http://wiki.eclipse.org/Linux_Tools_Project">Eclipse Linux Tools
Project</a></li>
<li><a class="reference external" href="https://wiki.archlinux.org/index.php/Stress_Test">Linux Stress
Tests</a></li>
<li><a class="reference external" href="http://kernel-perf.sourceforge.net/about_tests.php">Linux Performance Test
Tools</a></li>
<li><a class="reference external" href="http://www.csn.ul.ie/%7Emel/projects/mmtests/">Linux Memory Test
Tools</a></li>
<li><a class="reference external" href="http://www.phoronix-test-suite.com/">Phoronix Test Suite</a></li>
<li><a class="reference external" href="http://web.archive.org/web/20110614010958/http://ktown.kde.org/%7Eseli/memory/analysis.html">Memory Analysis
Tools</a></li>
<li><a class="reference external" href="http://www.selenic.com/smem/">smem - memory reporting tool</a></li>
<li><a class="reference external" href="http://sebastien.godard.pagesperso-orange.fr/documentation.html">SYSSTAT
Documentation</a></li>
</ul>
<hr class="docutils" />
</div>
</div>

    </section>
    <footer>
        <div class="tags">
                <a href="https://babuenir.github.io/blog/tag/linux.html">Linux</a>
                <a href="https://babuenir.github.io/blog/tag/debugging.html">Debugging</a>
                <a href="https://babuenir.github.io/blog/tag/tools.html">Tools</a>
        </div>
<div class="vcard author" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <a href="https://babuenir.github.io/blog/author/babusubashchandar.html">
        <img class="photo circle" itemprop="image" content="https://secure.gravatar.com/avatar/aaf9dadf96ba3361de25e04a6c9fdfc3" src="https://secure.gravatar.com/avatar/aaf9dadf96ba3361de25e04a6c9fdfc3"/>
        <strong class="fn name" itemprop="name">BabuSubashChandar</strong>
    </a>
</div>    </footer>
    <div class="comments">
      <h4>Comments</h4>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "tools-in-linux.html";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://babuenir.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>
</article>
    </section>
    </main>

<footer class="about">
  <div class="main-content">
    <h4>About</h4>
    <div class="about-img">
      <img class="photo circle" itemprop="image" content="https://secure.gravatar.com/avatar/aaf9dadf96ba3361de25e04a6c9fdfc3" src="https://secure.gravatar.com/avatar/aaf9dadf96ba3361de25e04a6c9fdfc3"/>
      <br>
    </div>
    <div class="about-info">
      <p>BabuSubashChandar is an Open Source Software enthusiast,
Embedded Systems Engineer and trainer by profession, an ardent lover of
arts and science. This is his personal blog, where you can find his
experiences and works related to GNU/Linux, Embedded Systems,
Literature, Paintings, and so on.
</p>
      <p><a class="button" href="https://babuenir.github.io/blog/profile.html" target="_blank">View Profile</a></p>
    </div>
  </div>
  <div class="social">
    <h5>Social</h5>
    <ul class="categories">
      <li><a href="https://github.com/babuenir"><i class="fa fa-github-square fa-3x"></i></a></li>
      <li><a href="https://twitter.com/babuenir"><i class="fa fa-twitter-square fa-3x"></i></a></li>
      <li><a href="https://www.linkedin.com/in/babuenir"><i class="fa fa-linkedin-square fa-3x"></i></a></li>
    </ul>
  </div>
</footer><script type="text/javascript">
    var disqus_shortname = 'babuenir';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<footer class="site-footer">
  <div>&copy; BabuSubashChandar </div>
  <p>Powered by <a href="https://getpelican.com/">Pelican.</a></p>
</footer></body>
</html>